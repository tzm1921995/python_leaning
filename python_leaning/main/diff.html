
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=ISO-8859-1" />
    <title></title>
    <style type="text/css">
        table.diff {font-family:Courier; border:medium;}
        .diff_header {background-color:#e0e0e0}
        td.diff_header {text-align:right}
        .diff_next {background-color:#c0c0c0}
        .diff_add {background-color:#aaffaa}
        .diff_chg {background-color:#ffff77}
        .diff_sub {background-color:#ffaaaa}
    </style>
</head>

<body>
    
    <table class="diff" id="difflib_chg_to0__top"
           cellspacing="0" cellpadding="0" rules="groups" >
        <colgroup></colgroup> <colgroup></colgroup> <colgroup></colgroup>
        <colgroup></colgroup> <colgroup></colgroup> <colgroup></colgroup>
        
        <tbody>
            <tr><td class="diff_next" id="difflib_chg_to0__0"><a href="#difflib_chg_to0__1">n</a></td><td class="diff_header" id="from0_1">1</td><td nowrap="nowrap">#!/bin/bash</td><td class="diff_next"><a href="#difflib_chg_to0__1">n</a></td><td class="diff_header" id="to0_1">1</td><td nowrap="nowrap"><span class="diff_add">﻿</span>#!/bin/bash</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_2">2</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_2">2</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_3">3</td><td nowrap="nowrap">#write&nbsp;by&nbsp;zhumaohai(admin#centos.bz)</td><td class="diff_next"></td><td class="diff_header" id="to0_3">3</td><td nowrap="nowrap">#write&nbsp;by&nbsp;zhumaohai(admin#centos.bz)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_4">4</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_4">4</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_5">5</td><td nowrap="nowrap">#显示菜单(单选)</td><td class="diff_next"></td><td class="diff_header" id="to0_5">5</td><td nowrap="nowrap">#显示菜单(单选)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_6">6</td><td nowrap="nowrap">display_menu(){</td><td class="diff_next"></td><td class="diff_header" id="to0_6">6</td><td nowrap="nowrap">display_menu(){</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_7">7</td><td nowrap="nowrap">local&nbsp;soft=$1</td><td class="diff_next"></td><td class="diff_header" id="to0_7">7</td><td nowrap="nowrap">local&nbsp;soft=$1</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_8">8</td><td nowrap="nowrap">local&nbsp;prompt="which&nbsp;${soft}&nbsp;you'd&nbsp;select:&nbsp;"</td><td class="diff_next"></td><td class="diff_header" id="to0_8">8</td><td nowrap="nowrap">local&nbsp;prompt="which&nbsp;${soft}&nbsp;you'd&nbsp;select:&nbsp;"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_9">9</td><td nowrap="nowrap">eval&nbsp;local&nbsp;arr=(\${${soft}_arr[@]})</td><td class="diff_next"></td><td class="diff_header" id="to0_9">9</td><td nowrap="nowrap">eval&nbsp;local&nbsp;arr=(\${${soft}_arr[@]})</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_10">10</td><td nowrap="nowrap">while&nbsp;true</td><td class="diff_next"></td><td class="diff_header" id="to0_10">10</td><td nowrap="nowrap">while&nbsp;true</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_11">11</td><td nowrap="nowrap">do</td><td class="diff_next"></td><td class="diff_header" id="to0_11">11</td><td nowrap="nowrap">do</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_12">12</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"####################&nbsp;${soft}&nbsp;setting&nbsp;####################\n\n"</td><td class="diff_next"></td><td class="diff_header" id="to0_12">12</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"####################&nbsp;${soft}&nbsp;setting&nbsp;####################\n\n"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_13">13</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;((i=1;i&lt;=${#arr[@]};i++&nbsp;));&nbsp;do&nbsp;echo&nbsp;-e&nbsp;"$i)&nbsp;${arr[$i-1]}";&nbsp;done</td><td class="diff_next"></td><td class="diff_header" id="to0_13">13</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;((i=1;i&lt;=${#arr[@]};i++&nbsp;));&nbsp;do&nbsp;echo&nbsp;-e&nbsp;"$i)&nbsp;${arr[$i-1]}";&nbsp;done</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_14">14</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td><td class="diff_next"></td><td class="diff_header" id="to0_14">14</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_15">15</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;read&nbsp;-p&nbsp;"${prompt}"&nbsp;$soft</td><td class="diff_next"></td><td class="diff_header" id="to0_15">15</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;read&nbsp;-p&nbsp;"${prompt}"&nbsp;$soft</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_16">16</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;eval&nbsp;local&nbsp;select=\$$soft</td><td class="diff_next"></td><td class="diff_header" id="to0_16">16</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;eval&nbsp;local&nbsp;select=\$$soft</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_17">17</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[&nbsp;"$select"&nbsp;==&nbsp;""&nbsp;]&nbsp;||&nbsp;[&nbsp;"${arr[$soft-1]}"&nbsp;==&nbsp;""&nbsp;&nbsp;];then</td><td class="diff_next"></td><td class="diff_header" id="to0_17">17</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[&nbsp;"$select"&nbsp;==&nbsp;""&nbsp;]&nbsp;||&nbsp;[&nbsp;"${arr[$soft-1]}"&nbsp;==&nbsp;""&nbsp;&nbsp;];then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_18">18</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt="input&nbsp;errors,please&nbsp;input&nbsp;a&nbsp;number:&nbsp;"</td><td class="diff_next"></td><td class="diff_header" id="to0_18">18</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt="input&nbsp;errors,please&nbsp;input&nbsp;a&nbsp;number:&nbsp;"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_19">19</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td><td class="diff_next"></td><td class="diff_header" id="to0_19">19</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_20">20</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval&nbsp;$soft=${arr[$soft-1]}</td><td class="diff_next"></td><td class="diff_header" id="to0_20">20</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval&nbsp;$soft=${arr[$soft-1]}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_21">21</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval&nbsp;echo&nbsp;"your&nbsp;selection:&nbsp;\$$soft"</td><td class="diff_next"></td><td class="diff_header" id="to0_21">21</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval&nbsp;echo&nbsp;"your&nbsp;selection:&nbsp;\$$soft"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_22">22</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</td><td class="diff_next"></td><td class="diff_header" id="to0_22">22</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_23">23</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_23">23</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_24">24</td><td nowrap="nowrap">done</td><td class="diff_next"></td><td class="diff_header" id="to0_24">24</td><td nowrap="nowrap">done</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_25">25</td><td nowrap="nowrap">}</td><td class="diff_next"></td><td class="diff_header" id="to0_25">25</td><td nowrap="nowrap">}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_26">26</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_26">26</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_27">27</td><td nowrap="nowrap">#把带宽bit单位转换为人类可读单位</td><td class="diff_next"></td><td class="diff_header" id="to0_27">27</td><td nowrap="nowrap">#把带宽bit单位转换为人类可读单位</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_28">28</td><td nowrap="nowrap">bit_to_human_readable(){</td><td class="diff_next"></td><td class="diff_header" id="to0_28">28</td><td nowrap="nowrap">bit_to_human_readable(){</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_29">29</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#input&nbsp;bit&nbsp;value</td><td class="diff_next"></td><td class="diff_header" id="to0_29">29</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#input&nbsp;bit&nbsp;value</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_30">30</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;trafficValue=$1</td><td class="diff_next"></td><td class="diff_header" id="to0_30">30</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;trafficValue=$1</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_31">31</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_31">31</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_32">32</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[[&nbsp;${trafficValue%.*}&nbsp;-gt&nbsp;922&nbsp;]];then</td><td class="diff_next"></td><td class="diff_header" id="to0_32">32</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[[&nbsp;${trafficValue%.*}&nbsp;-gt&nbsp;922&nbsp;]];then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_33">33</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#conv&nbsp;to&nbsp;Kb</td><td class="diff_next"></td><td class="diff_header" id="to0_33">33</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#conv&nbsp;to&nbsp;Kb</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_34">34</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trafficValue=`awk&nbsp;-v&nbsp;value=$trafficValue&nbsp;'BEGIN{printf&nbsp;"%0.1f",value/1024}'`</td><td class="diff_next"></td><td class="diff_header" id="to0_34">34</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trafficValue=`awk&nbsp;-v&nbsp;value=$trafficValue&nbsp;'BEGIN{printf&nbsp;"%0.1f",value/1024}'`</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_35">35</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[[&nbsp;${trafficValue%.*}&nbsp;-gt&nbsp;922&nbsp;]];then</td><td class="diff_next"></td><td class="diff_header" id="to0_35">35</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[[&nbsp;${trafficValue%.*}&nbsp;-gt&nbsp;922&nbsp;]];then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_36">36</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#conv&nbsp;to&nbsp;Mb</td><td class="diff_next"></td><td class="diff_header" id="to0_36">36</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#conv&nbsp;to&nbsp;Mb</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_37">37</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trafficValue=`awk&nbsp;-v&nbsp;value=$trafficValue&nbsp;'BEGIN{printf&nbsp;"%0.1f",value/1024}'`</td><td class="diff_next"></td><td class="diff_header" id="to0_37">37</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trafficValue=`awk&nbsp;-v&nbsp;value=$trafficValue&nbsp;'BEGIN{printf&nbsp;"%0.1f",value/1024}'`</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_38">38</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"${trafficValue}Mb"</td><td class="diff_next"></td><td class="diff_header" id="to0_38">38</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"${trafficValue}Mb"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_39">39</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td><td class="diff_next"></td><td class="diff_header" id="to0_39">39</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_40">40</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"${trafficValue}Kb"</td><td class="diff_next"></td><td class="diff_header" id="to0_40">40</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"${trafficValue}Kb"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_41">41</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_41">41</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_42">42</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td><td class="diff_next"></td><td class="diff_header" id="to0_42">42</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_43">43</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"${trafficValue}b"</td><td class="diff_next"></td><td class="diff_header" id="to0_43">43</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"${trafficValue}b"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_44">44</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_44">44</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_45">45</td><td nowrap="nowrap">}</td><td class="diff_next"></td><td class="diff_header" id="to0_45">45</td><td nowrap="nowrap">}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_46">46</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_46">46</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_47">47</td><td nowrap="nowrap">#判断包管理工具</td><td class="diff_next"></td><td class="diff_header" id="to0_47">47</td><td nowrap="nowrap">#判断包管理工具</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_48">48</td><td nowrap="nowrap">check_package_manager(){</td><td class="diff_next"></td><td class="diff_header" id="to0_48">48</td><td nowrap="nowrap">check_package_manager(){</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_49">49</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;manager=$1</td><td class="diff_next"></td><td class="diff_header" id="to0_49">49</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;manager=$1</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_50">50</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;systemPackage=''</td><td class="diff_next"></td><td class="diff_header" id="to0_50">50</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;systemPackage=''</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_51">51</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cat&nbsp;/etc/issue&nbsp;|&nbsp;grep&nbsp;-q&nbsp;-E&nbsp;-i&nbsp;"ubuntu|debian";then</td><td class="diff_next"></td><td class="diff_header" id="to0_51">51</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cat&nbsp;/etc/issue&nbsp;|&nbsp;grep&nbsp;-q&nbsp;-E&nbsp;-i&nbsp;"ubuntu|debian";then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_52">52</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemPackage='apt'</td><td class="diff_next"></td><td class="diff_header" id="to0_52">52</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemPackage='apt'</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_53">53</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;cat&nbsp;/etc/issue&nbsp;|&nbsp;grep&nbsp;-q&nbsp;-E&nbsp;-i&nbsp;"centos|red&nbsp;hat|redhat";then</td><td class="diff_next"></td><td class="diff_header" id="to0_53">53</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;cat&nbsp;/etc/issue&nbsp;|&nbsp;grep&nbsp;-q&nbsp;-E&nbsp;-i&nbsp;"centos|red&nbsp;hat|redhat";then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_54">54</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemPackage='yum'</td><td class="diff_next"></td><td class="diff_header" id="to0_54">54</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemPackage='yum'</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_55">55</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;cat&nbsp;/proc/version&nbsp;|&nbsp;grep&nbsp;-q&nbsp;-E&nbsp;-i&nbsp;"ubuntu|debian";then</td><td class="diff_next"></td><td class="diff_header" id="to0_55">55</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;cat&nbsp;/proc/version&nbsp;|&nbsp;grep&nbsp;-q&nbsp;-E&nbsp;-i&nbsp;"ubuntu|debian";then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_56">56</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemPackage='apt'</td><td class="diff_next"></td><td class="diff_header" id="to0_56">56</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemPackage='apt'</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_57">57</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;cat&nbsp;/proc/version&nbsp;|&nbsp;grep&nbsp;-q&nbsp;-E&nbsp;-i&nbsp;"centos|red&nbsp;hat|redhat";then</td><td class="diff_next"></td><td class="diff_header" id="to0_57">57</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;cat&nbsp;/proc/version&nbsp;|&nbsp;grep&nbsp;-q&nbsp;-E&nbsp;-i&nbsp;"centos|red&nbsp;hat|redhat";then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_58">58</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemPackage='yum'</td><td class="diff_next"></td><td class="diff_header" id="to0_58">58</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemPackage='yum'</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_59">59</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td><td class="diff_next"></td><td class="diff_header" id="to0_59">59</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_60">60</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"unkonw"</td><td class="diff_next"></td><td class="diff_header" id="to0_60">60</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"unkonw"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_61">61</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_61">61</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_62">62</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_62">62</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_63">63</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[&nbsp;"$manager"&nbsp;==&nbsp;"$systemPackage"&nbsp;];then</td><td class="diff_next"></td><td class="diff_header" id="to0_63">63</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[&nbsp;"$manager"&nbsp;==&nbsp;"$systemPackage"&nbsp;];then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_64">64</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0</td><td class="diff_next"></td><td class="diff_header" id="to0_64">64</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_65">65</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td><td class="diff_next"></td><td class="diff_header" id="to0_65">65</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_66">66</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1</td><td class="diff_next"></td><td class="diff_header" id="to0_66">66</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_67">67</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_67">67</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_68">68</td><td nowrap="nowrap">}</td><td class="diff_next"></td><td class="diff_header" id="to0_68">68</td><td nowrap="nowrap">}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_69">69</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_69">69</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_70">70</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_70">70</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_71">71</td><td nowrap="nowrap">#实时流量</td><td class="diff_next"></td><td class="diff_header" id="to0_71">71</td><td nowrap="nowrap">#实时流量</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_72">72</td><td nowrap="nowrap">realTimeTraffic(){</td><td class="diff_next"></td><td class="diff_header" id="to0_72">72</td><td nowrap="nowrap">realTimeTraffic(){</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_73">73</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth=""</td><td class="diff_next"></td><td class="diff_header" id="to0_73">73</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth=""</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_74">74</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;nic_arr=(`ifconfig&nbsp;|&nbsp;grep&nbsp;-E&nbsp;-o&nbsp;"^[a-z0-9]+"&nbsp;|&nbsp;grep&nbsp;-v&nbsp;"lo"&nbsp;|&nbsp;uniq`)</td><td class="diff_next"></td><td class="diff_header" id="to0_74">74</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;nic_arr=(`ifconfig&nbsp;|&nbsp;grep&nbsp;-E&nbsp;-o&nbsp;"^[a-z0-9]+"&nbsp;|&nbsp;grep&nbsp;-v&nbsp;"lo"&nbsp;|&nbsp;uniq`)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_75">75</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;nicLen=${#nic_arr[@]}</td><td class="diff_next"></td><td class="diff_header" id="to0_75">75</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;nicLen=${#nic_arr[@]}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_76">76</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[[&nbsp;$nicLen&nbsp;-eq&nbsp;0&nbsp;]];&nbsp;then</td><td class="diff_next"></td><td class="diff_header" id="to0_76">76</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[[&nbsp;$nicLen&nbsp;-eq&nbsp;0&nbsp;]];&nbsp;then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_77">77</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"sorry,I&nbsp;can&nbsp;not&nbsp;detect&nbsp;any&nbsp;network&nbsp;device,please&nbsp;report&nbsp;this&nbsp;issue&nbsp;to&nbsp;author."</td><td class="diff_next"></td><td class="diff_header" id="to0_77">77</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"sorry,I&nbsp;can&nbsp;not&nbsp;detect&nbsp;any&nbsp;network&nbsp;device,please&nbsp;report&nbsp;this&nbsp;issue&nbsp;to&nbsp;author."</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_78">78</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit&nbsp;1</td><td class="diff_next"></td><td class="diff_header" id="to0_78">78</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit&nbsp;1</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_79">79</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;[[&nbsp;$nicLen&nbsp;-eq&nbsp;1&nbsp;]];&nbsp;then</td><td class="diff_next"></td><td class="diff_header" id="to0_79">79</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;[[&nbsp;$nicLen&nbsp;-eq&nbsp;1&nbsp;]];&nbsp;then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_80">80</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth=$nic_arr</td><td class="diff_next"></td><td class="diff_header" id="to0_80">80</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth=$nic_arr</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_81">81</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td><td class="diff_next"></td><td class="diff_header" id="to0_81">81</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_82">82</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_menu&nbsp;nic</td><td class="diff_next"></td><td class="diff_header" id="to0_82">82</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_menu&nbsp;nic</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_83">83</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth=$nic</td><td class="diff_next"></td><td class="diff_header" id="to0_83">83</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth=$nic</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_84">84</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_84">84</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_85">85</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_85">85</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_86">86</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;clear=true</td><td class="diff_next"></td><td class="diff_header" id="to0_86">86</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;clear=true</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_87">87</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_in_peak=0</td><td class="diff_next"></td><td class="diff_header" id="to0_87">87</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_in_peak=0</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_88">88</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_out_peak=0</td><td class="diff_next"></td><td class="diff_header" id="to0_88">88</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_out_peak=0</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_89">89</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_in=0</td><td class="diff_next"></td><td class="diff_header" id="to0_89">89</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_in=0</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_90">90</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_out=0</td><td class="diff_next"></td><td class="diff_header" id="to0_90">90</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_out=0</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_91">91</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_91">91</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_92">92</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;true;do</td><td class="diff_next"></td><td class="diff_header" id="to0_92">92</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;true;do</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_93">93</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#移动光标到0:0位置</td><td class="diff_next"></td><td class="diff_header" id="to0_93">93</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#移动光标到0:0位置</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_94">94</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"\033[0;0H"</td><td class="diff_next"></td><td class="diff_header" id="to0_94">94</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"\033[0;0H"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_95">95</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#清屏并打印Now&nbsp;Peak</td><td class="diff_next"></td><td class="diff_header" id="to0_95">95</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#清屏并打印Now&nbsp;Peak</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_96">96</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;$clear&nbsp;==&nbsp;true&nbsp;]]&nbsp;&amp;&amp;&nbsp;printf&nbsp;"\033[2J"&nbsp;&amp;&amp;&nbsp;echo&nbsp;"$eth--------Now--------Peak-----------"</td><td class="diff_next"></td><td class="diff_header" id="to0_96">96</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;$clear&nbsp;==&nbsp;true&nbsp;]]&nbsp;&amp;&amp;&nbsp;printf&nbsp;"\033[2J"&nbsp;&amp;&amp;&nbsp;echo&nbsp;"$eth--------Now--------Peak-----------"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_97">97</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;traffic_be=(`awk&nbsp;-v&nbsp;eth=$eth&nbsp;-F'[:&nbsp;]+'&nbsp;'{if&nbsp;($0&nbsp;~eth){print&nbsp;$3,$11}}'&nbsp;/proc/net/dev`)</td><td class="diff_next"></td><td class="diff_header" id="to0_97">97</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;traffic_be=(`awk&nbsp;-v&nbsp;eth=$eth&nbsp;-F'[:&nbsp;]+'&nbsp;'{if&nbsp;($0&nbsp;~eth){print&nbsp;$3,$11}}'&nbsp;/proc/net/dev`)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_98">98</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;2</td><td class="diff_next"></td><td class="diff_header" id="to0_98">98</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;2</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_99">99</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;traffic_af=(`awk&nbsp;-v&nbsp;eth=$eth&nbsp;-F'[:&nbsp;]+'&nbsp;'{if&nbsp;($0&nbsp;~eth){print&nbsp;$3,$11}}'&nbsp;/proc/net/dev`)</td><td class="diff_next"></td><td class="diff_header" id="to0_99">99</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;traffic_af=(`awk&nbsp;-v&nbsp;eth=$eth&nbsp;-F'[:&nbsp;]+'&nbsp;'{if&nbsp;($0&nbsp;~eth){print&nbsp;$3,$11}}'&nbsp;/proc/net/dev`)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_100">100</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#计算速率</td><td class="diff_next"></td><td class="diff_header" id="to0_100">100</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#计算速率</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_101">101</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth_in=$((&nbsp;(${traffic_af[0]}-${traffic_be[0]})*8/2&nbsp;))</td><td class="diff_next"></td><td class="diff_header" id="to0_101">101</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth_in=$((&nbsp;(${traffic_af[0]}-${traffic_be[0]})*8/2&nbsp;))</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_102">102</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth_out=$((&nbsp;(${traffic_af[1]}-${traffic_be[1]})*8/2&nbsp;))</td><td class="diff_next"></td><td class="diff_header" id="to0_102">102</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth_out=$((&nbsp;(${traffic_af[1]}-${traffic_be[1]})*8/2&nbsp;))</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_103">103</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#计算流量峰值</td><td class="diff_next"></td><td class="diff_header" id="to0_103">103</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#计算流量峰值</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_104">104</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;$eth_in&nbsp;-gt&nbsp;$eth_in_peak&nbsp;]]&nbsp;&amp;&amp;&nbsp;eth_in_peak=$eth_in</td><td class="diff_next"></td><td class="diff_header" id="to0_104">104</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;$eth_in&nbsp;-gt&nbsp;$eth_in_peak&nbsp;]]&nbsp;&amp;&amp;&nbsp;eth_in_peak=$eth_in</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_105">105</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;$eth_out&nbsp;-gt&nbsp;$eth_out_peak&nbsp;]]&nbsp;&amp;&amp;&nbsp;eth_out_peak=$eth_out</td><td class="diff_next"></td><td class="diff_header" id="to0_105">105</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;$eth_out&nbsp;-gt&nbsp;$eth_out_peak&nbsp;]]&nbsp;&amp;&amp;&nbsp;eth_out_peak=$eth_out</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_106">106</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#移动光标到2:1</td><td class="diff_next"></td><td class="diff_header" id="to0_106">106</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#移动光标到2:1</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_107">107</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"\033[2;1H"</td><td class="diff_next"></td><td class="diff_header" id="to0_107">107</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"\033[2;1H"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_108">108</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#清除当前行</td><td class="diff_next"></td><td class="diff_header" id="to0_108">108</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#清除当前行</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_109">109</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"\033[K"</td><td class="diff_next"></td><td class="diff_header" id="to0_109">109</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"\033[K"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_110">110</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"%-20s&nbsp;%-20s\n"&nbsp;"Receive:&nbsp;&nbsp;$(bit_to_human_readable&nbsp;$eth_in)"&nbsp;"$(bit_to_human_readable&nbsp;$eth_in_peak)"</td><td class="diff_next"></td><td class="diff_header" id="to0_110">110</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"%-20s&nbsp;%-20s\n"&nbsp;"Receive:&nbsp;&nbsp;$(bit_to_human_readable&nbsp;$eth_in)"&nbsp;"$(bit_to_human_readable&nbsp;$eth_in_peak)"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_111">111</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#清除当前行</td><td class="diff_next"></td><td class="diff_header" id="to0_111">111</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#清除当前行</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_112">112</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"\033[K"</td><td class="diff_next"></td><td class="diff_header" id="to0_112">112</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"\033[K"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_113">113</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"%-20s&nbsp;%-20s\n"&nbsp;"Transmit:&nbsp;$(bit_to_human_readable&nbsp;$eth_out)"&nbsp;"$(bit_to_human_readable&nbsp;$eth_out_peak)"</td><td class="diff_next"></td><td class="diff_header" id="to0_113">113</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf&nbsp;"%-20s&nbsp;%-20s\n"&nbsp;"Transmit:&nbsp;$(bit_to_human_readable&nbsp;$eth_out)"&nbsp;"$(bit_to_human_readable&nbsp;$eth_out_peak)"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_114">114</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;$clear&nbsp;==&nbsp;true&nbsp;]]&nbsp;&amp;&amp;&nbsp;clear=false</td><td class="diff_next"></td><td class="diff_header" id="to0_114">114</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&nbsp;$clear&nbsp;==&nbsp;true&nbsp;]]&nbsp;&amp;&amp;&nbsp;clear=false</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_115">115</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td><td class="diff_next"></td><td class="diff_header" id="to0_115">115</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_116">116</td><td nowrap="nowrap">}</td><td class="diff_next"></td><td class="diff_header" id="to0_116">116</td><td nowrap="nowrap">}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_117">117</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_117">117</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_118">118</td><td nowrap="nowrap">#流量和连接概览</td><td class="diff_next"></td><td class="diff_header" id="to0_118">118</td><td nowrap="nowrap">#流量和连接概览</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_119">119</td><td nowrap="nowrap">trafficAndConnectionOverview(){</td><td class="diff_next"></td><td class="diff_header" id="to0_119">119</td><td nowrap="nowrap">trafficAndConnectionOverview(){</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_120">120</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!&nbsp;which&nbsp;tcpdump&nbsp;&gt;&nbsp;/dev/null;then</td><td class="diff_next"></td><td class="diff_header" id="to0_120">120</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;!&nbsp;which&nbsp;tcpdump&nbsp;&gt;&nbsp;/dev/null;then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_121">121</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"tcpdump&nbsp;not&nbsp;found,going&nbsp;to&nbsp;install&nbsp;it."</td><td class="diff_next"></td><td class="diff_header" id="to0_121">121</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"tcpdump&nbsp;not&nbsp;found,going&nbsp;to&nbsp;install&nbsp;it."</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_122">122</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;check_package_manager&nbsp;apt;then</td><td class="diff_next"></td><td class="diff_header" id="to0_122">122</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;check_package_manager&nbsp;apt;then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_123">123</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apt-get&nbsp;-y&nbsp;install&nbsp;tcpdump</td><td class="diff_next"></td><td class="diff_header" id="to0_123">123</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apt-get&nbsp;-y&nbsp;install&nbsp;tcpdump</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_124">124</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;check_package_manager&nbsp;yum;then</td><td class="diff_next"></td><td class="diff_header" id="to0_124">124</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;check_package_manager&nbsp;yum;then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_125">125</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yum&nbsp;-y&nbsp;install&nbsp;tcpdump</td><td class="diff_next"></td><td class="diff_header" id="to0_125">125</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yum&nbsp;-y&nbsp;install&nbsp;tcpdump</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_126">126</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_126">126</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_127">127</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_127">127</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_128">128</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_128">128</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_129">129</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;reg=""</td><td class="diff_next"></td><td class="diff_header" id="to0_129">129</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;reg=""</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_130">130</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth=""</td><td class="diff_next"></td><td class="diff_header" id="to0_130">130</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth=""</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_131">131</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;nic_arr=(`ifconfig&nbsp;|&nbsp;grep&nbsp;-E&nbsp;-o&nbsp;"^[a-z0-9]+"&nbsp;|&nbsp;grep&nbsp;-v&nbsp;"lo"&nbsp;|&nbsp;uniq`)</td><td class="diff_next"></td><td class="diff_header" id="to0_131">131</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;nic_arr=(`ifconfig&nbsp;|&nbsp;grep&nbsp;-E&nbsp;-o&nbsp;"^[a-z0-9]+"&nbsp;|&nbsp;grep&nbsp;-v&nbsp;"lo"&nbsp;|&nbsp;uniq`)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_132">132</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;nicLen=${#nic_arr[@]}</td><td class="diff_next"></td><td class="diff_header" id="to0_132">132</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;nicLen=${#nic_arr[@]}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_133">133</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[[&nbsp;$nicLen&nbsp;-eq&nbsp;0&nbsp;]];&nbsp;then</td><td class="diff_next"></td><td class="diff_header" id="to0_133">133</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;[[&nbsp;$nicLen&nbsp;-eq&nbsp;0&nbsp;]];&nbsp;then</td></tr>
            <tr><td class="diff_next" id="difflib_chg_to0__1"></td><td class="diff_header" id="from0_134">134</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"sorry,I&nbsp;can&nbsp;not&nbsp;detect&nbsp;any&nbsp;network&nbsp;device,please&nbsp;report&nbsp;this&nbsp;issue&nbsp;to&nbsp;author."</td><td class="diff_next"></td><td class="diff_header" id="to0_134">134</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"sorry,I&nbsp;can&nbsp;not&nbsp;detect&nbsp;any&nbsp;network&nbsp;device,please&nbsp;report&nbsp;this&nbsp;issue&nbsp;to&nbsp;author."</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_135">135</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit&nbsp;1</td><td class="diff_next"></td><td class="diff_header" id="to0_135">135</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit&nbsp;1</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_136">136</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;[[&nbsp;$nicLen&nbsp;-eq&nbsp;1&nbsp;]];&nbsp;then</td><td class="diff_next"></td><td class="diff_header" id="to0_136">136</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;[[&nbsp;$nicLen&nbsp;-eq&nbsp;1&nbsp;]];&nbsp;then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_137">137</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth=$nic_arr</td><td class="diff_next"></td><td class="diff_header" id="to0_137">137</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth=$nic_arr</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_138">138</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td><td class="diff_next"></td><td class="diff_header" id="to0_138">138</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
            <tr><td class="diff_next"><a href="#difflib_chg_to0__top">t</a></td><td class="diff_header" id="from0_139">139</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_menu&nbsp;ni<span class="diff_chg">c</span></td><td class="diff_next"><a href="#difflib_chg_to0__top">t</a></td><td class="diff_header" id="to0_139">139</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display_menu&nbsp;ni<span class="diff_chg">e</span></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_140">140</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth=$nic</td><td class="diff_next"></td><td class="diff_header" id="to0_140">140</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth=$nic</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_141">141</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_141">141</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_142">142</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_142">142</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_143">143</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"please&nbsp;wait&nbsp;for&nbsp;10s&nbsp;to&nbsp;generate&nbsp;network&nbsp;data..."</td><td class="diff_next"></td><td class="diff_header" id="to0_143">143</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"please&nbsp;wait&nbsp;for&nbsp;10s&nbsp;to&nbsp;generate&nbsp;network&nbsp;data..."</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_144">144</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td><td class="diff_next"></td><td class="diff_header" id="to0_144">144</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_145">145</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#当前流量值</td><td class="diff_next"></td><td class="diff_header" id="to0_145">145</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#当前流量值</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_146">146</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;traffic_be=(`awk&nbsp;-v&nbsp;eth=$eth&nbsp;-F'[:&nbsp;]+'&nbsp;'{if&nbsp;($0&nbsp;~eth){print&nbsp;$3,$11}}'&nbsp;/proc/net/dev`)</td><td class="diff_next"></td><td class="diff_header" id="to0_146">146</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;traffic_be=(`awk&nbsp;-v&nbsp;eth=$eth&nbsp;-F'[:&nbsp;]+'&nbsp;'{if&nbsp;($0&nbsp;~eth){print&nbsp;$3,$11}}'&nbsp;/proc/net/dev`)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_147">147</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#tcpdump监听网络</td><td class="diff_next"></td><td class="diff_header" id="to0_147">147</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#tcpdump监听网络</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_148">148</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;tcpdump&nbsp;-v&nbsp;-i&nbsp;$eth&nbsp;-tnn&nbsp;&gt;&nbsp;/tmp/tcpdump_temp&nbsp;2&gt;&amp;1&nbsp;&amp;</td><td class="diff_next"></td><td class="diff_header" id="to0_148">148</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;tcpdump&nbsp;-v&nbsp;-i&nbsp;$eth&nbsp;-tnn&nbsp;&gt;&nbsp;/tmp/tcpdump_temp&nbsp;2&gt;&amp;1&nbsp;&amp;</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_149">149</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;10</td><td class="diff_next"></td><td class="diff_header" id="to0_149">149</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;10</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_150">150</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;clear</td><td class="diff_next"></td><td class="diff_header" id="to0_150">150</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;clear</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_151">151</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;kill&nbsp;`ps&nbsp;aux&nbsp;|&nbsp;grep&nbsp;tcpdump&nbsp;|&nbsp;grep&nbsp;-v&nbsp;grep&nbsp;|&nbsp;awk&nbsp;'{print&nbsp;$2}'`</td><td class="diff_next"></td><td class="diff_header" id="to0_151">151</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;kill&nbsp;`ps&nbsp;aux&nbsp;|&nbsp;grep&nbsp;tcpdump&nbsp;|&nbsp;grep&nbsp;-v&nbsp;grep&nbsp;|&nbsp;awk&nbsp;'{print&nbsp;$2}'`</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_152">152</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#10s后流量值</td><td class="diff_next"></td><td class="diff_header" id="to0_152">152</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#10s后流量值</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_153">153</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;traffic_af=(`awk&nbsp;-v&nbsp;eth=$eth&nbsp;-F'[:&nbsp;]+'&nbsp;'{if&nbsp;($0&nbsp;~eth){print&nbsp;$3,$11}}'&nbsp;/proc/net/dev`)</td><td class="diff_next"></td><td class="diff_header" id="to0_153">153</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;traffic_af=(`awk&nbsp;-v&nbsp;eth=$eth&nbsp;-F'[:&nbsp;]+'&nbsp;'{if&nbsp;($0&nbsp;~eth){print&nbsp;$3,$11}}'&nbsp;/proc/net/dev`)</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_154">154</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#打印10s平均速率</td><td class="diff_next"></td><td class="diff_header" id="to0_154">154</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#打印10s平均速率</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_155">155</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_in=$((&nbsp;(${traffic_af[0]}-${traffic_be[0]})*8/10&nbsp;))</td><td class="diff_next"></td><td class="diff_header" id="to0_155">155</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_in=$((&nbsp;(${traffic_af[0]}-${traffic_be[0]})*8/10&nbsp;))</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_156">156</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_out=$((&nbsp;(${traffic_af[1]}-${traffic_be[1]})*8/10&nbsp;))</td><td class="diff_next"></td><td class="diff_header" id="to0_156">156</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;eth_out=$((&nbsp;(${traffic_af[1]}-${traffic_be[1]})*8/10&nbsp;))</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_157">157</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mnetwork&nbsp;device&nbsp;$eth&nbsp;average&nbsp;traffic&nbsp;in&nbsp;10s:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_157">157</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mnetwork&nbsp;device&nbsp;$eth&nbsp;average&nbsp;traffic&nbsp;in&nbsp;10s:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_158">158</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$eth&nbsp;Receive:&nbsp;$(bit_to_human_readable&nbsp;$eth_in)/s"</td><td class="diff_next"></td><td class="diff_header" id="to0_158">158</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$eth&nbsp;Receive:&nbsp;$(bit_to_human_readable&nbsp;$eth_in)/s"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_159">159</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$eth&nbsp;Transmit:&nbsp;$(bit_to_human_readable&nbsp;$eth_out)/s"</td><td class="diff_next"></td><td class="diff_header" id="to0_159">159</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$eth&nbsp;Transmit:&nbsp;$(bit_to_human_readable&nbsp;$eth_out)/s"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_160">160</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td><td class="diff_next"></td><td class="diff_header" id="to0_160">160</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_161">161</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;regTcpdump=$(ifconfig&nbsp;|&nbsp;grep&nbsp;-A&nbsp;1&nbsp;$eth&nbsp;|&nbsp;awk&nbsp;-F'[:&nbsp;]+'&nbsp;'$0~/inet&nbsp;addr:/{printf&nbsp;$4"|"}'&nbsp;|&nbsp;sed&nbsp;-e&nbsp;'s/|$//'&nbsp;-e&nbsp;'s/^/(/'&nbsp;-e&nbsp;'s/$/)\\\\\.[0-9]+:/')</td><td class="diff_next"></td><td class="diff_header" id="to0_161">161</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;regTcpdump=$(ifconfig&nbsp;|&nbsp;grep&nbsp;-A&nbsp;1&nbsp;$eth&nbsp;|&nbsp;awk&nbsp;-F'[:&nbsp;]+'&nbsp;'$0~/inet&nbsp;addr:/{printf&nbsp;$4"|"}'&nbsp;|&nbsp;sed&nbsp;-e&nbsp;'s/|$//'&nbsp;-e&nbsp;'s/^/(/'&nbsp;-e&nbsp;'s/$/)\\\\\.[0-9]+:/')</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_162">162</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_162">162</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_163">163</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#新旧版本tcpdump输出格式不一样,分别处理</td><td class="diff_next"></td><td class="diff_header" id="to0_163">163</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#新旧版本tcpdump输出格式不一样,分别处理</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_164">164</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;awk&nbsp;'/^IP/{print;exit}'&nbsp;/tmp/tcpdump_temp&nbsp;|&nbsp;grep&nbsp;-q&nbsp;")$";then</td><td class="diff_next"></td><td class="diff_header" id="to0_164">164</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;awk&nbsp;'/^IP/{print;exit}'&nbsp;/tmp/tcpdump_temp&nbsp;|&nbsp;grep&nbsp;-q&nbsp;")$";then</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_165">165</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#处理tcpdump文件</td><td class="diff_next"></td><td class="diff_header" id="to0_165">165</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#处理tcpdump文件</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_166">166</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'/^IP/{print;getline;print}'&nbsp;/tmp/tcpdump_temp&nbsp;&gt;&nbsp;/tmp/tcpdump_temp2</td><td class="diff_next"></td><td class="diff_header" id="to0_166">166</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'/^IP/{print;getline;print}'&nbsp;/tmp/tcpdump_temp&nbsp;&gt;&nbsp;/tmp/tcpdump_temp2</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_167">167</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td><td class="diff_next"></td><td class="diff_header" id="to0_167">167</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_168">168</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#处理tcpdump文件</td><td class="diff_next"></td><td class="diff_header" id="to0_168">168</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#处理tcpdump文件</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_169">169</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'/^IP/{print}'&nbsp;/tmp/tcpdump_temp&nbsp;&gt;&nbsp;/tmp/tcpdump_temp2</td><td class="diff_next"></td><td class="diff_header" id="to0_169">169</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'/^IP/{print}'&nbsp;/tmp/tcpdump_temp&nbsp;&gt;&nbsp;/tmp/tcpdump_temp2</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_170">170</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed&nbsp;-i&nbsp;-r&nbsp;'s#(.*:&nbsp;[0-9]+\))(.*)#\1\n&nbsp;&nbsp;&nbsp;&nbsp;\2#'&nbsp;/tmp/tcpdump_temp2</td><td class="diff_next"></td><td class="diff_header" id="to0_170">170</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed&nbsp;-i&nbsp;-r&nbsp;'s#(.*:&nbsp;[0-9]+\))(.*)#\1\n&nbsp;&nbsp;&nbsp;&nbsp;\2#'&nbsp;/tmp/tcpdump_temp2</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_171">171</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td><td class="diff_next"></td><td class="diff_header" id="to0_171">171</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;fi</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_172">172</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_172">172</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_173">173</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'{len=$NF;sub(/\)/,"",len);getline;print&nbsp;$0,len}'&nbsp;/tmp/tcpdump_temp2&nbsp;&gt;&nbsp;/tmp/tcpdump</td><td class="diff_next"></td><td class="diff_header" id="to0_173">173</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'{len=$NF;sub(/\)/,"",len);getline;print&nbsp;$0,len}'&nbsp;/tmp/tcpdump_temp2&nbsp;&gt;&nbsp;/tmp/tcpdump</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_174">174</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计每个端口在10s内的平均流量</td><td class="diff_next"></td><td class="diff_header" id="to0_174">174</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计每个端口在10s内的平均流量</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_175">175</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32maverage&nbsp;traffic&nbsp;in&nbsp;10s&nbsp;base&nbsp;on&nbsp;server&nbsp;port:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_175">175</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32maverage&nbsp;traffic&nbsp;in&nbsp;10s&nbsp;base&nbsp;on&nbsp;server&nbsp;port:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_176">176</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;-F'[&nbsp;.:]+'&nbsp;-v&nbsp;regTcpdump=$regTcpdump&nbsp;'{if&nbsp;($0&nbsp;~&nbsp;regTcpdump){line="clients&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11":"$12}else{line=$2"."$3"."$4"."$5":"$6"&nbsp;&gt;&nbsp;clients"};sum[line]+=$NF*8/10}END{for&nbsp;(line&nbsp;in&nbsp;sum){printf&nbsp;"%s&nbsp;%d\n",line,sum[line]}}'&nbsp;/tmp/tcpdump&nbsp;|&nbsp;\</td><td class="diff_next"></td><td class="diff_header" id="to0_176">176</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;-F'[&nbsp;.:]+'&nbsp;-v&nbsp;regTcpdump=$regTcpdump&nbsp;'{if&nbsp;($0&nbsp;~&nbsp;regTcpdump){line="clients&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11":"$12}else{line=$2"."$3"."$4"."$5":"$6"&nbsp;&gt;&nbsp;clients"};sum[line]+=$NF*8/10}END{for&nbsp;(line&nbsp;in&nbsp;sum){printf&nbsp;"%s&nbsp;%d\n",line,sum[line]}}'&nbsp;/tmp/tcpdump&nbsp;|&nbsp;\</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_177">177</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sort&nbsp;-k&nbsp;4&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;while&nbsp;read&nbsp;a&nbsp;b&nbsp;c&nbsp;d;do</td><td class="diff_next"></td><td class="diff_header" id="to0_177">177</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sort&nbsp;-k&nbsp;4&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;while&nbsp;read&nbsp;a&nbsp;b&nbsp;c&nbsp;d;do</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_178">178</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$a&nbsp;$b&nbsp;$c&nbsp;$(bit_to_human_readable&nbsp;$d)/s"</td><td class="diff_next"></td><td class="diff_header" id="to0_178">178</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$a&nbsp;$b&nbsp;$c&nbsp;$(bit_to_human_readable&nbsp;$d)/s"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_179">179</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td><td class="diff_next"></td><td class="diff_header" id="to0_179">179</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_180">180</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[11A"</td><td class="diff_next"></td><td class="diff_header" id="to0_180">180</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[11A"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_181">181</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td><td class="diff_next"></td><td class="diff_header" id="to0_181">181</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_182">182</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32maverage&nbsp;traffic&nbsp;in&nbsp;10s&nbsp;base&nbsp;on&nbsp;client&nbsp;port:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_182">182</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32maverage&nbsp;traffic&nbsp;in&nbsp;10s&nbsp;base&nbsp;on&nbsp;client&nbsp;port:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_183">183</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;-F'[&nbsp;.:]+'&nbsp;-v&nbsp;regTcpdump=$regTcpdump&nbsp;'{if&nbsp;($0&nbsp;~&nbsp;regTcpdump){line=$2"."$3"."$4"."$5":"$6"&nbsp;&gt;&nbsp;server"}else{line="server&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11":"$12};sum[line]+=$NF*8/10}END{for&nbsp;(line&nbsp;in&nbsp;sum){printf&nbsp;"%s&nbsp;%d\n",line,sum[line]}}'&nbsp;/tmp/tcpdump&nbsp;|&nbsp;\</td><td class="diff_next"></td><td class="diff_header" id="to0_183">183</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;-F'[&nbsp;.:]+'&nbsp;-v&nbsp;regTcpdump=$regTcpdump&nbsp;'{if&nbsp;($0&nbsp;~&nbsp;regTcpdump){line=$2"."$3"."$4"."$5":"$6"&nbsp;&gt;&nbsp;server"}else{line="server&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11":"$12};sum[line]+=$NF*8/10}END{for&nbsp;(line&nbsp;in&nbsp;sum){printf&nbsp;"%s&nbsp;%d\n",line,sum[line]}}'&nbsp;/tmp/tcpdump&nbsp;|&nbsp;\</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_184">184</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sort&nbsp;-k&nbsp;4&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;while&nbsp;read&nbsp;a&nbsp;b&nbsp;c&nbsp;d;do</td><td class="diff_next"></td><td class="diff_header" id="to0_184">184</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sort&nbsp;-k&nbsp;4&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;while&nbsp;read&nbsp;a&nbsp;b&nbsp;c&nbsp;d;do</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_185">185</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td><td class="diff_next"></td><td class="diff_header" id="to0_185">185</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_186">186</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$a&nbsp;$b&nbsp;$c&nbsp;$(bit_to_human_readable&nbsp;$d)/s"</td><td class="diff_next"></td><td class="diff_header" id="to0_186">186</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$a&nbsp;$b&nbsp;$c&nbsp;$(bit_to_human_readable&nbsp;$d)/s"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_187">187</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td><td class="diff_next"></td><td class="diff_header" id="to0_187">187</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_188">188</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_188">188</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_189">189</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td><td class="diff_next"></td><td class="diff_header" id="to0_189">189</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_190">190</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计在10s内占用带宽最大的前10个ip</td><td class="diff_next"></td><td class="diff_header" id="to0_190">190</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计在10s内占用带宽最大的前10个ip</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_191">191</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mtop&nbsp;10&nbsp;ip&nbsp;average&nbsp;traffic&nbsp;in&nbsp;10s&nbsp;base&nbsp;on&nbsp;server:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_191">191</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mtop&nbsp;10&nbsp;ip&nbsp;average&nbsp;traffic&nbsp;in&nbsp;10s&nbsp;base&nbsp;on&nbsp;server:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_192">192</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;-F'[&nbsp;.:]+'&nbsp;-v&nbsp;regTcpdump=$regTcpdump&nbsp;'{if&nbsp;($0&nbsp;~&nbsp;regTcpdump){line=$2"."$3"."$4"."$5"&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11":"$12}else{line=$2"."$3"."$4"."$5":"$6"&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11};sum[line]+=$NF*8/10}END{for&nbsp;(line&nbsp;in&nbsp;sum){printf&nbsp;"%s&nbsp;%d\n",line,sum[line]}}'&nbsp;/tmp/tcpdump&nbsp;|&nbsp;\</td><td class="diff_next"></td><td class="diff_header" id="to0_192">192</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;-F'[&nbsp;.:]+'&nbsp;-v&nbsp;regTcpdump=$regTcpdump&nbsp;'{if&nbsp;($0&nbsp;~&nbsp;regTcpdump){line=$2"."$3"."$4"."$5"&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11":"$12}else{line=$2"."$3"."$4"."$5":"$6"&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11};sum[line]+=$NF*8/10}END{for&nbsp;(line&nbsp;in&nbsp;sum){printf&nbsp;"%s&nbsp;%d\n",line,sum[line]}}'&nbsp;/tmp/tcpdump&nbsp;|&nbsp;\</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_193">193</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sort&nbsp;-k&nbsp;4&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;while&nbsp;read&nbsp;a&nbsp;b&nbsp;c&nbsp;d;do</td><td class="diff_next"></td><td class="diff_header" id="to0_193">193</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sort&nbsp;-k&nbsp;4&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;while&nbsp;read&nbsp;a&nbsp;b&nbsp;c&nbsp;d;do</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_194">194</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$a&nbsp;$b&nbsp;$c&nbsp;$(bit_to_human_readable&nbsp;$d)/s"</td><td class="diff_next"></td><td class="diff_header" id="to0_194">194</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$a&nbsp;$b&nbsp;$c&nbsp;$(bit_to_human_readable&nbsp;$d)/s"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_195">195</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td><td class="diff_next"></td><td class="diff_header" id="to0_195">195</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_196">196</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[11A"</td><td class="diff_next"></td><td class="diff_header" id="to0_196">196</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[11A"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_197">197</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td><td class="diff_next"></td><td class="diff_header" id="to0_197">197</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_198">198</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mtop&nbsp;10&nbsp;ip&nbsp;average&nbsp;traffic&nbsp;in&nbsp;10s&nbsp;base&nbsp;on&nbsp;client:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_198">198</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mtop&nbsp;10&nbsp;ip&nbsp;average&nbsp;traffic&nbsp;in&nbsp;10s&nbsp;base&nbsp;on&nbsp;client:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_199">199</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;-F'[&nbsp;.:]+'&nbsp;-v&nbsp;regTcpdump=$regTcpdump&nbsp;'{if&nbsp;($0&nbsp;~&nbsp;regTcpdump){line=$2"."$3"."$4"."$5":"$6"&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11}else{line=$2"."$3"."$4"."$5"&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11":"$12};sum[line]+=$NF*8/10}END{for&nbsp;(line&nbsp;in&nbsp;sum){printf&nbsp;"%s&nbsp;%d\n",line,sum[line]}}'&nbsp;/tmp/tcpdump&nbsp;|&nbsp;\</td><td class="diff_next"></td><td class="diff_header" id="to0_199">199</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;-F'[&nbsp;.:]+'&nbsp;-v&nbsp;regTcpdump=$regTcpdump&nbsp;'{if&nbsp;($0&nbsp;~&nbsp;regTcpdump){line=$2"."$3"."$4"."$5":"$6"&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11}else{line=$2"."$3"."$4"."$5"&nbsp;&gt;&nbsp;"$8"."$9"."$10"."$11":"$12};sum[line]+=$NF*8/10}END{for&nbsp;(line&nbsp;in&nbsp;sum){printf&nbsp;"%s&nbsp;%d\n",line,sum[line]}}'&nbsp;/tmp/tcpdump&nbsp;|&nbsp;\</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_200">200</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sort&nbsp;-k&nbsp;4&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;while&nbsp;read&nbsp;a&nbsp;b&nbsp;c&nbsp;d;do</td><td class="diff_next"></td><td class="diff_header" id="to0_200">200</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;sort&nbsp;-k&nbsp;4&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;while&nbsp;read&nbsp;a&nbsp;b&nbsp;c&nbsp;d;do</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_201">201</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td><td class="diff_next"></td><td class="diff_header" id="to0_201">201</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_202">202</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$a&nbsp;$b&nbsp;$c&nbsp;$(bit_to_human_readable&nbsp;$d)/s"</td><td class="diff_next"></td><td class="diff_header" id="to0_202">202</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;"$a&nbsp;$b&nbsp;$c&nbsp;$(bit_to_human_readable&nbsp;$d)/s"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_203">203</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td><td class="diff_next"></td><td class="diff_header" id="to0_203">203</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_204">204</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td><td class="diff_next"></td><td class="diff_header" id="to0_204">204</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_205">205</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计连接状态</td><td class="diff_next"></td><td class="diff_header" id="to0_205">205</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计连接状态</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_206">206</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;regSS=$(ifconfig&nbsp;|&nbsp;grep&nbsp;-A&nbsp;1&nbsp;$eth&nbsp;|&nbsp;awk&nbsp;-F'[:&nbsp;]+'&nbsp;'$0~/inet&nbsp;addr:/{printf&nbsp;$4"|"}'&nbsp;|&nbsp;sed&nbsp;-e&nbsp;'s/|$//')</td><td class="diff_next"></td><td class="diff_header" id="to0_206">206</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;regSS=$(ifconfig&nbsp;|&nbsp;grep&nbsp;-A&nbsp;1&nbsp;$eth&nbsp;|&nbsp;awk&nbsp;-F'[:&nbsp;]+'&nbsp;'$0~/inet&nbsp;addr:/{printf&nbsp;$4"|"}'&nbsp;|&nbsp;sed&nbsp;-e&nbsp;'s/|$//')</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_207">207</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;-an&nbsp;|&nbsp;grep&nbsp;-v&nbsp;-E&nbsp;"LISTEN|UNCONN"&nbsp;|&nbsp;grep&nbsp;-E&nbsp;"$regSS"&nbsp;&gt;&nbsp;/tmp/ss</td><td class="diff_next"></td><td class="diff_header" id="to0_207">207</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;ss&nbsp;-an&nbsp;|&nbsp;grep&nbsp;-v&nbsp;-E&nbsp;"LISTEN|UNCONN"&nbsp;|&nbsp;grep&nbsp;-E&nbsp;"$regSS"&nbsp;&gt;&nbsp;/tmp/ss</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_208">208</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mconnection&nbsp;state&nbsp;count:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_208">208</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mconnection&nbsp;state&nbsp;count:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_209">209</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'NR&gt;1{sum[$(NF-4)]+=1}END{for&nbsp;(state&nbsp;in&nbsp;sum){print&nbsp;state,sum[state]}}'&nbsp;/tmp/ss&nbsp;|&nbsp;sort&nbsp;-k&nbsp;2&nbsp;-nr</td><td class="diff_next"></td><td class="diff_header" id="to0_209">209</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'NR&gt;1{sum[$(NF-4)]+=1}END{for&nbsp;(state&nbsp;in&nbsp;sum){print&nbsp;state,sum[state]}}'&nbsp;/tmp/ss&nbsp;|&nbsp;sort&nbsp;-k&nbsp;2&nbsp;-nr</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_210">210</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td><td class="diff_next"></td><td class="diff_header" id="to0_210">210</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_211">211</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计各端口连接状态</td><td class="diff_next"></td><td class="diff_header" id="to0_211">211</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计各端口连接状态</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_212">212</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mconnection&nbsp;state&nbsp;count&nbsp;by&nbsp;port&nbsp;base&nbsp;on&nbsp;server:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_212">212</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mconnection&nbsp;state&nbsp;count&nbsp;by&nbsp;port&nbsp;base&nbsp;on&nbsp;server:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_213">213</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'NR&gt;1{sum[$(NF-4),$(NF-1)]+=1}END{for&nbsp;(key&nbsp;in&nbsp;sum){split(key,subkey,SUBSEP);print&nbsp;subkey[1],subkey[2],sum[subkey[1],subkey[2]]}}'&nbsp;/tmp/ss&nbsp;|&nbsp;sort&nbsp;-k&nbsp;3&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10</td><td class="diff_next"></td><td class="diff_header" id="to0_213">213</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'NR&gt;1{sum[$(NF-4),$(NF-1)]+=1}END{for&nbsp;(key&nbsp;in&nbsp;sum){split(key,subkey,SUBSEP);print&nbsp;subkey[1],subkey[2],sum[subkey[1],subkey[2]]}}'&nbsp;/tmp/ss&nbsp;|&nbsp;sort&nbsp;-k&nbsp;3&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_214">214</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[11A"</td><td class="diff_next"></td><td class="diff_header" id="to0_214">214</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[11A"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_215">215</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td><td class="diff_next"></td><td class="diff_header" id="to0_215">215</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-ne&nbsp;"\033[50C"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_216">216</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mconnection&nbsp;state&nbsp;count&nbsp;by&nbsp;port&nbsp;base&nbsp;on&nbsp;client:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_216">216</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mconnection&nbsp;state&nbsp;count&nbsp;by&nbsp;port&nbsp;base&nbsp;on&nbsp;client:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_217">217</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'NR&gt;1{sum[$(NF-4),$(NF)]+=1}END{for&nbsp;(key&nbsp;in&nbsp;sum){split(key,subkey,SUBSEP);print&nbsp;subkey[1],subkey[2],sum[subkey[1],subkey[2]]}}'&nbsp;/tmp/ss&nbsp;|&nbsp;sort&nbsp;-k&nbsp;3&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;awk&nbsp;'{print&nbsp;"\033[50C"$0}'</td><td class="diff_next"></td><td class="diff_header" id="to0_217">217</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;'NR&gt;1{sum[$(NF-4),$(NF)]+=1}END{for&nbsp;(key&nbsp;in&nbsp;sum){split(key,subkey,SUBSEP);print&nbsp;subkey[1],subkey[2],sum[subkey[1],subkey[2]]}}'&nbsp;/tmp/ss&nbsp;|&nbsp;sort&nbsp;-k&nbsp;3&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10&nbsp;|&nbsp;awk&nbsp;'{print&nbsp;"\033[50C"$0}'</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_218">218</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td><td class="diff_next"></td><td class="diff_header" id="to0_218">218</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_219">219</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计端口为80且状态为ESTAB连接数最多的前10个IP</td><td class="diff_next"></td><td class="diff_header" id="to0_219">219</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计端口为80且状态为ESTAB连接数最多的前10个IP</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_220">220</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mtop&nbsp;10&nbsp;ip&nbsp;ESTAB&nbsp;state&nbsp;count&nbsp;at&nbsp;port&nbsp;80:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_220">220</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mtop&nbsp;10&nbsp;ip&nbsp;ESTAB&nbsp;state&nbsp;count&nbsp;at&nbsp;port&nbsp;80:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_221">221</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;/tmp/ss&nbsp;|&nbsp;grep&nbsp;ESTAB&nbsp;|&nbsp;awk&nbsp;-F'[:&nbsp;]+'&nbsp;'{sum[$(NF-2)]+=1}END{for&nbsp;(ip&nbsp;in&nbsp;sum){print&nbsp;ip,sum[ip]}}'&nbsp;|&nbsp;sort&nbsp;-k&nbsp;2&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10</td><td class="diff_next"></td><td class="diff_header" id="to0_221">221</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;/tmp/ss&nbsp;|&nbsp;grep&nbsp;ESTAB&nbsp;|&nbsp;awk&nbsp;-F'[:&nbsp;]+'&nbsp;'{sum[$(NF-2)]+=1}END{for&nbsp;(ip&nbsp;in&nbsp;sum){print&nbsp;ip,sum[ip]}}'&nbsp;|&nbsp;sort&nbsp;-k&nbsp;2&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_222">222</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td><td class="diff_next"></td><td class="diff_header" id="to0_222">222</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_223">223</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计端口为80且状态为SYN-RECV连接数最多的前10个IP</td><td class="diff_next"></td><td class="diff_header" id="to0_223">223</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;#统计端口为80且状态为SYN-RECV连接数最多的前10个IP</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_224">224</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mtop&nbsp;10&nbsp;ip&nbsp;SYN-RECV&nbsp;state&nbsp;count&nbsp;at&nbsp;port&nbsp;80:&nbsp;\033[0m"</td><td class="diff_next"></td><td class="diff_header" id="to0_224">224</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"\033[32mtop&nbsp;10&nbsp;ip&nbsp;SYN-RECV&nbsp;state&nbsp;count&nbsp;at&nbsp;port&nbsp;80:&nbsp;\033[0m"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_225">225</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;/tmp/ss&nbsp;|&nbsp;grep&nbsp;-E&nbsp;"$regSS"&nbsp;|&nbsp;grep&nbsp;SYN-RECV&nbsp;|&nbsp;awk&nbsp;-F'[:&nbsp;]+'&nbsp;'{sum[$(NF-2)]+=1}END{for&nbsp;(ip&nbsp;in&nbsp;sum){print&nbsp;ip,sum[ip]}}'&nbsp;|&nbsp;sort&nbsp;-k&nbsp;2&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10</td><td class="diff_next"></td><td class="diff_header" id="to0_225">225</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;cat&nbsp;/tmp/ss&nbsp;|&nbsp;grep&nbsp;-E&nbsp;"$regSS"&nbsp;|&nbsp;grep&nbsp;SYN-RECV&nbsp;|&nbsp;awk&nbsp;-F'[:&nbsp;]+'&nbsp;'{sum[$(NF-2)]+=1}END{for&nbsp;(ip&nbsp;in&nbsp;sum){print&nbsp;ip,sum[ip]}}'&nbsp;|&nbsp;sort&nbsp;-k&nbsp;2&nbsp;-nr&nbsp;|&nbsp;head&nbsp;-n&nbsp;10</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_226">226</td><td nowrap="nowrap">}</td><td class="diff_next"></td><td class="diff_header" id="to0_226">226</td><td nowrap="nowrap">}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_227">227</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_227">227</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_228">228</td><td nowrap="nowrap">main(){</td><td class="diff_next"></td><td class="diff_header" id="to0_228">228</td><td nowrap="nowrap">main(){</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_229">229</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;true;&nbsp;do</td><td class="diff_next"></td><td class="diff_header" id="to0_229">229</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;true;&nbsp;do</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_230">230</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"1)&nbsp;real&nbsp;time&nbsp;traffic.\n2)&nbsp;traffic&nbsp;and&nbsp;connection&nbsp;overview.\n"</td><td class="diff_next"></td><td class="diff_header" id="to0_230">230</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;-e&nbsp;"1)&nbsp;real&nbsp;time&nbsp;traffic.\n2)&nbsp;traffic&nbsp;and&nbsp;connection&nbsp;overview.\n"</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_231">231</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read&nbsp;-p&nbsp;"please&nbsp;input&nbsp;your&nbsp;select(ie&nbsp;1):&nbsp;"&nbsp;select</td><td class="diff_next"></td><td class="diff_header" id="to0_231">231</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read&nbsp;-p&nbsp;"please&nbsp;input&nbsp;your&nbsp;select(ie&nbsp;1):&nbsp;"&nbsp;select</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_232">232</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;&nbsp;$select&nbsp;in</td><td class="diff_next"></td><td class="diff_header" id="to0_232">232</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;&nbsp;$select&nbsp;in</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_233">233</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;realTimeTraffic;break;;</td><td class="diff_next"></td><td class="diff_header" id="to0_233">233</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;realTimeTraffic;break;;</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_234">234</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;trafficAndConnectionOverview;break;;</td><td class="diff_next"></td><td class="diff_header" id="to0_234">234</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;trafficAndConnectionOverview;break;;</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_235">235</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)&nbsp;echo&nbsp;"input&nbsp;error,please&nbsp;input&nbsp;a&nbsp;number.";;</td><td class="diff_next"></td><td class="diff_header" id="to0_235">235</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)&nbsp;echo&nbsp;"input&nbsp;error,please&nbsp;input&nbsp;a&nbsp;number.";;</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_236">236</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;esac</td><td class="diff_next"></td><td class="diff_header" id="to0_236">236</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;esac</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_237">237</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td><td class="diff_next"></td><td class="diff_header" id="to0_237">237</td><td nowrap="nowrap">&nbsp;&nbsp;&nbsp;&nbsp;done</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_238">238</td><td nowrap="nowrap">}</td><td class="diff_next"></td><td class="diff_header" id="to0_238">238</td><td nowrap="nowrap">}</td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_239">239</td><td nowrap="nowrap"></td><td class="diff_next"></td><td class="diff_header" id="to0_239">239</td><td nowrap="nowrap"></td></tr>
            <tr><td class="diff_next"></td><td class="diff_header" id="from0_240">240</td><td nowrap="nowrap">main</td><td class="diff_next"></td><td class="diff_header" id="to0_240">240</td><td nowrap="nowrap">main</td></tr>
        </tbody>
    </table>
    <table class="diff" summary="Legends">
        <tr> <th colspan="2"> Legends </th> </tr>
        <tr> <td> <table border="" summary="Colors">
                      <tr><th> Colors </th> </tr>
                      <tr><td class="diff_add">&nbsp;Added&nbsp;</td></tr>
                      <tr><td class="diff_chg">Changed</td> </tr>
                      <tr><td class="diff_sub">Deleted</td> </tr>
                  </table></td>
             <td> <table border="" summary="Links">
                      <tr><th colspan="2"> Links </th> </tr>
                      <tr><td>(f)irst change</td> </tr>
                      <tr><td>(n)ext change</td> </tr>
                      <tr><td>(t)op</td> </tr>
                  </table></td> </tr>
    </table>
</body>

</html>
